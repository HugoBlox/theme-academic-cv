---
title: How to Save Time Using the Kaggle API from RStudio
author: ''
date: '2018-08-31'
slug: test
categories: []
tags: []
---



<p>Although there are many resources explaining how to use the Kaggle API in Python, I could not find much information about using it from Rstudio. Therefore, in this post I will explain how to use the kaggle API (via kaggler) to search for and download datasets available on the site.</p>
<div id="installing-packages" class="section level2">
<h2>Installing packages</h2>
<pre class="r"><code>#devtools::install_github(&quot;mkearney/kaggler&quot;)
library(kaggler)
library(tidyverse)
library(kableExtra)
library(knitr)
library(plotly)
library(tableHTML)
library(htmlTable)
library(xtable)</code></pre>
<p>Next we need to run kgl_auth(username=“yourusername”,key=“yourpassword”) to establish a connection to the API. This can be obtained from Kaggle by going to Account–&gt; Create New API token. It will be in the downloaded JSON file, which should go in your R project directory.</p>
<p>I don’t include my credentials because each account authorization is unique.</p>
<p>Once your your key is recorded, you can search for competitions by name or any keyword, such as “classification”.
Here, I search for “Walmart” to see past all competitions associated with Walmart.</p>
<pre class="r"><code>walComps&lt;-kgl_competitions_list(search = &quot;Walmart&quot;)


tableHTML(walComps %&gt;% select(title,description,url))</code></pre>
<p>
<table style="border-collapse:collapse;" class=table_4549 border=1>
<thead>
<tr>
  <th id="tableHTML_header_1"> </th>
  <th id="tableHTML_header_2">title</th>
  <th id="tableHTML_header_3">description</th>
  <th id="tableHTML_header_4">url</th>
</tr>
</thead>
<tbody>
<tr>
  <td id="tableHTML_rownames">1</td>
  <td id="tableHTML_column_1">Walmart Recruiting: Trip Type Classification</td>
  <td id="tableHTML_column_2">Use market basket analysis to classify shopping trips</td>
  <td id="tableHTML_column_3">https://www.kaggle.com/c/walmart-recruiting-trip-type-classification</td>
</tr>
<tr>
  <td id="tableHTML_rownames">2</td>
  <td id="tableHTML_column_1">Walmart Recruiting - Store Sales Forecasting</td>
  <td id="tableHTML_column_2">Use historical markdown data to predict store sales</td>
  <td id="tableHTML_column_3">https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting</td>
</tr>
<tr>
  <td id="tableHTML_rownames">3</td>
  <td id="tableHTML_column_1">Walmart Recruiting II: Sales in Stormy Weather</td>
  <td id="tableHTML_column_2">Predict how sales of weather-sensitive products are affected by snow and rain</td>
  <td id="tableHTML_column_3">https://www.kaggle.com/c/walmart-recruiting-sales-in-stormy-weather</td>
</tr>
</tbody>
</table>
I want to download the sales forecasting dataset. To do so, I need the id column entry for the forecasting dataset</p>
<pre class="r"><code>#get id for forecasting dataset
forId&lt;-walComps %&gt;% 
  filter(str_detect(ref,&quot;forecasting&quot;)) %&gt;% 
  pull(id)

forId</code></pre>
<pre><code>## [1] 3816</code></pre>
<p>Now I can see what data files are available for the competition (at the Id number)</p>
<pre class="r"><code>#get data list
dataList&lt;-kgl_competitions_data_list(forId)


#tableHTML(dataList %&gt;% select(name,url))

# htmlTable(dataList %&gt;% select(name,url), cgroup = &#39;&#39;, n.cgroup = 2, n.rgroup=5,caption = &#39;&#39;,
#           ## padding to cells: top side bottom
#           css.cell = &#39;padding: 0px 0px 0px;&#39;)
print(xtable(dataList %&gt;% select(name,url)),size = &quot;small&quot;)</code></pre>
<pre><code>## % latex table generated in R 3.6.0 by xtable 1.8-4 package
## % Mon Sep 02 11:21:47 2019
## \begin{table}[ht]
## \centering
## \begingroup\small
## \begin{tabular}{rll}
##   \hline
##  &amp; name &amp; url \\ 
##   \hline
## 1 &amp; features.csv.zip &amp; https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting/download/features.csv.zip \\ 
##   2 &amp; sampleSubmission.csv.zip &amp; https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting/download/sampleSubmission.csv.zip \\ 
##   3 &amp; stores.csv &amp; https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting/download/stores.csv \\ 
##   4 &amp; test.csv.zip &amp; https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting/download/test.csv.zip \\ 
##   5 &amp; train.csv.zip &amp; https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting/download/train.csv.zip \\ 
##    \hline
## \end{tabular}
## \endgroup
## \end{table}</code></pre>
<p>The files can be downloaded in several ways: by visiting the above urls, by using RCurl to access the https link, by using the following PowerShell CMD for each url (substitute your file path).</p>
<pre class="r"><code># $Credentials = Get-Credential
# Invoke-WebRequest -Uri &quot;https://www.kaggle.com/c/walmart-recruiting-store-sales-forecasting/download/features.csv.zip&quot; -OutFile &quot;C:/Users/username/R projects/projectname/features.csv&quot; -Credential $Credentials</code></pre>
<p>…You could, of course, go to the Kaggle website, manually search for datasets, and download them that way. However, it saves time to do everything from RStudio. This pipeline could also easily be scaled or automated get multiple datasets and schedule data pulls.</p>
</div>
